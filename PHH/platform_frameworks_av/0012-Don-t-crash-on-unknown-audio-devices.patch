From d79a1c050fed922e20425efe2d59e1e0d424e156 Mon Sep 17 00:00:00 2001
From: Pierre-Hugues Husson <phh@phh.me>
Date: Tue, 23 Mar 2021 00:16:42 +0100
Subject: [PATCH 12/23] Don't crash on unknown audio devices

Change-Id: I2df8d88f742da6a84aa8888cdf19de25444de919
---
 .../audiopolicy/common/managerdefinitions/src/Serializer.cpp    | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/services/audiopolicy/common/managerdefinitions/src/Serializer.cpp b/services/audiopolicy/common/managerdefinitions/src/Serializer.cpp
index c6db471..a76da45 100644
--- a/services/audiopolicy/common/managerdefinitions/src/Serializer.cpp
+++ b/services/audiopolicy/common/managerdefinitions/src/Serializer.cpp
@@ -1011,7 +1011,7 @@ std::variant<status_t, ModuleTraits::Element> PolicySerializer::deserialize<Modu
                         sp<DeviceDescriptor> device = module->getDeclaredDevices().
                                 getDeviceFromTagName(std::string(reinterpret_cast<const char*>(
                                                         attachedDevice.get())));
-                        if (device == nullptr && mIgnoreVendorExtensions) {
+                        if (device == nullptr) {
                             ALOGW("Skipped attached device \"%s\" because it likely uses a vendor"
                                     "extension type",
                                     reinterpret_cast<const char*>(attachedDevice.get()));
-- 
2.37.1

